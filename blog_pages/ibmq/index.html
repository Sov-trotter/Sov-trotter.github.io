<!doctype html> <!-- Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes Free for personal and commercial use under the MIT license https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE --> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/minimal-mistakes.css"> <link rel=stylesheet  href="/css/adjust.css"> <!--[if IE ]> <style> /* old IE unsupported flexbox fixes */ .greedy-nav .site-title { padding-right: 3em; } .greedy-nav button { position: absolute; top: 0; right: 0; height: 100%; } </style> <![endif]--> <title>IBMQJulia.jl</title> <body class=layout--single > <div class=masthead > <div class=masthead__inner-wrap > <div class=masthead__menu > <nav id=site-nav  class=greedy-nav > <a class=site-title  href="/">Arsh Sharma</a> <a class=site-subtitle  href="/">Receptive to code, klingon & 8bit music</a> <ul class=visible-links > <li class=masthead__menu-item ><a href="/assets/Arsh Sharma Resume.pdf" >Resume</a> <li class=masthead__menu-item ><a href="/about/" >About Me</a> <li class=masthead__menu-item ><a href="/blog/" >Blog</a> <li class=masthead__menu-item ><a href="/menu3/">Contact</a> </ul> <button class="greedy-nav__toggle hidden" type=button > <span class=visually-hidden >Toggle menu</span> <div class=navicon ></div> </button> <ul class="hidden-links hidden"></ul> </nav> </div> </div> </div> <div class=initial-content > <div id=main  role=main > <div class="sidebar sticky"> <div itemscope itemtype="https://schema.org/Person"> <div class=author__avatar > <img src="/assets/minimal-mistakes/zenobia.png" alt="Arsh Sharma" itemprop=image > </div> <div class=author__content > <h3 class=author__name  itemprop=name >Arsh Sharma</h3> <p class=author__bio  itemprop=description >Probably not a commoner.</p> </div> <div class=author__urls-wrapper > <button class="btn btn--inverse">Follow</button> <ul class="author__urls social-icons"> <li itemprop=homeLocation  itemscope itemtype="https://schema.org/Place"> <i class="fas fa-fw fa-map-marker-alt" aria-hidden=true ></i> <span itemprop=name >Hamirpur, India</span> <li><a href="https://twitter.com/Sov_trotter" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden=true ></i>Twitter</a> <li><a href="https://github.com/Sov-trotter" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden=true ></i>GitHub</a> <li><a href="https://www.linkedin.com/in/sov-trotter/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden=true ></i>LinkedIn</a> </ul> </div> </div> </div> <div class=franklin-content ><h3 id="ॐ_परणमद_परणमद_परणतपरणमदचयत"><a href="#ॐ_परणमद_परणमद_परणतपरणमदचयत" class=header-anchor >ॐ पूर्णमदः पूर्णमिदं पूर्णात्पूर्णमुदच्यते ।</a></h3> <h3 id="परणसय_परणमदय_परणमववशषयत"><a href="#परणसय_परणमदय_परणमववशषयत" class=header-anchor >पूर्णस्य पूर्णमादाय पूर्णमेवावशिष्यते ॥</a></h3> <h3 id="ॐ_शनत_शनत_शनत"><a href="#ॐ_शनत_शनत_शनत" class=header-anchor >ॐ शान्तिः शान्तिः शान्तिः ॥</a></h3> <h6 id=infinity_gives_adding_gives_and_substraction_of_is_also_let_the_peace_live ><a href="#infinity_gives_adding_gives_and_substraction_of_is_also_let_the_peace_live" class=header-anchor ><em>Infinity gives ∞, adding ∞ gives ∞ and substraction of ∞ is also ∞. Let the peace live.</em></a></h6> <hr /> <p>The <a href="https://github.com/Sov-trotter/IBMQJulia.jl">IBMQJulia.jl</a> package came out of the desire to support the <a href="https://quantum-computing.ibm.com/">IBM Quantum Experience(IBMQ)</a> interface in native Julia for the <a href="https://github.com/QuantumBFS">Yao/QuantumBFS</a> ecosystem. The IBMQ interface allows researchers to run quatum circuits on the quantum hardware built by IBM realtime via cloud. </p> <p>While Julia&#39;s own quantum circuit simulator, <a href="https://github.com/QuantumBFS/Yao.jl">Yao.jl</a> has grown in all directions, it was needed to support running larger Yao based circuits on real hardware. IBMQ only supports two ways of running circuits, i.e. the circuit composer on IBMQ and via a REST API. We made use of the JuliaWeb framework, viz. <a href="https://github.com/JuliaWeb/HTTP.jl">HTTP.jl</a> for API requests and <a href="https://github.com/JuliaIO/JSON.jl">JSON.jl</a> for parsing the data. </p> <p>The package implements the following methods:</p> <ul> <li><p>The login method, </p> </ul> <code>authenticate&#40;token::String&#41;</code> <pre><code class="julia hljs">user = authenticate(token)
Logging You <span class=hljs-keyword >in</span>...✔
IBMQUser(<span class=hljs-string >&quot;......&quot;</span>)</code></pre> <ul> <li><p>A <code>Yao.AbstractRegister</code> type viz. <code>IBMQReg</code> that holds vital info regarding communication with the IBMQ backend, </p> </ul> <code>createreg&#40;user::IBMQUser&#41;</code> <p>Here one selects the hardware on which it is desired to run circuit.</p> <pre><code class="julia hljs">reg = createreg(user)
Fetching Backends...✔
The following backends are available &gt; 
(<span class=hljs-number >1</span>, <span class=hljs-string >&quot;ibmq_qasm_simulator&quot;</span>)
(<span class=hljs-number >2</span>, <span class=hljs-string >&quot;ibmqx2&quot;</span>)
(<span class=hljs-number >3</span>, <span class=hljs-string >&quot;ibmq_16_melbourne&quot;</span>)
(<span class=hljs-number >4</span>, <span class=hljs-string >&quot;ibmq_vigo&quot;</span>)
(<span class=hljs-number >5</span>, <span class=hljs-string >&quot;ibmq_ourense&quot;</span>)
(<span class=hljs-number >6</span>, <span class=hljs-string >&quot;ibmq_valencia&quot;</span>)
(<span class=hljs-number >7</span>, <span class=hljs-string >&quot;ibmq_armonk&quot;</span>)
(<span class=hljs-number >8</span>, <span class=hljs-string >&quot;ibmq_athens&quot;</span>)
(<span class=hljs-number >9</span>, <span class=hljs-string >&quot;ibmq_santiago&quot;</span>)
Enter the serial number of the backend you wish to use
<span class=hljs-number >9</span>
n_qubits = <span class=hljs-number >5</span>
basis_gates=<span class=hljs-built_in >Any</span>[<span class=hljs-string >&quot;id&quot;</span>, <span class=hljs-string >&quot;u1&quot;</span>, <span class=hljs-string >&quot;u2&quot;</span>, <span class=hljs-string >&quot;u3&quot;</span>, <span class=hljs-string >&quot;cx&quot;</span>]
Confirm? (Y/N)
y
IBMQJulia.IBMQReg{<span class=hljs-built_in >Int64</span>}
    active qubits: <span class=hljs-number >5</span>/<span class=hljs-number >5</span></code></pre> <ul> <li><p>Yao inherently uses the <code>apply&#33;&#40;&#41;</code> method to run circuits on a <code>AbstractRegister</code> type. Here also we use the same method to apply our circuit to the <code>IBMQReg</code>, </p> </ul> <code>apply&#33;&#40;reg::IBMQReg, qc::Array&#123;AbstractBlock&#125;&#41;</code> <p>This creates a IBMQJob type, that holds the session info, register and the circuit</p> <pre><code class="julia hljs">job = apply!(reg, [qc])
Connecting to ibmq_santiago...✔
Preparing Data...✔
Uploading circuit to ibmq_santiago...✔
Notifying backend...✔
IBMQJulia.Job(IBMQJulia.IBMQReg{<span class=hljs-built_in >Int64</span>}
    active qubits: <span class=hljs-number >5</span>/<span class=hljs-number >5</span>, IBMQJulia.Qobj(<span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;qobj_id&quot;</span> =&gt; <span class=hljs-string >&quot;foo&quot;</span>,<span class=hljs-string >&quot;experiments&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}[<span class=hljs-built_in >Dict</span>(<span class=hljs-string >&quot;instructions&quot;</span> =&gt; <span class=hljs-built_in >Any</span>[<span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;name&quot;</span> =&gt; <span class=hljs-string >&quot;x&quot;</span>,<span class=hljs-string >&quot;qubits&quot;</span> =&gt; [<span class=hljs-number >0</span>]), <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;name&quot;</span> =&gt; <span class=hljs-string >&quot;y&quot;</span>,<span class=hljs-string >&quot;qubits&quot;</span> =&gt; [<span class=hljs-number >1</span>]), <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;name&quot;</span> =&gt; <span class=hljs-string >&quot;z&quot;</span>,<span class=hljs-string >&quot;qubits&quot;</span> =&gt; [<span class=hljs-number >2</span>]), <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;name&quot;</span> =&gt; <span class=hljs-string >&quot;t&quot;</span>,<span class=hljs-string >&quot;qubits&quot;</span> =&gt; [<span class=hljs-number >1</span>]), <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;name&quot;</span> =&gt; <span class=hljs-string >&quot;swap&quot;</span>,<span class=hljs-string >&quot;qubits&quot;</span> =&gt; [<span class=hljs-number >0</span>, <span class=hljs-number >1</span>]), <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;name&quot;</span> =&gt; <span class=hljs-string >&quot;u3&quot;</span>,<span class=hljs-string >&quot;params&quot;</span> =&gt; [<span class=hljs-number >0.7</span>, <span class=hljs-number >0.0</span>, <span class=hljs-number >0.0</span>],<span class=hljs-string >&quot;qubits&quot;</span> =&gt; [<span class=hljs-number >2</span>]), <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;name&quot;</span> =&gt; <span class=hljs-string >&quot;cy&quot;</span>,<span class=hljs-string >&quot;qubits&quot;</span> =&gt; [<span class=hljs-number >1</span>, <span class=hljs-number >0</span>]), <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;name&quot;</span> =&gt; <span class=hljs-string >&quot;cz&quot;</span>,<span class=hljs-string >&quot;qubits&quot;</span> =&gt; [<span class=hljs-number >2</span>, <span class=hljs-number >1</span>])],<span class=hljs-string >&quot;header&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;clbit_labels&quot;</span> =&gt; <span class=hljs-built_in >Array</span>{<span class=hljs-built_in >Any</span>,<span class=hljs-number >1</span>}[[<span class=hljs-string >&quot;c&quot;</span>, <span class=hljs-number >0</span>], [<span class=hljs-string >&quot;c&quot;</span>, <span class=hljs-number >1</span>]],<span class=hljs-string >&quot;qubit_labels&quot;</span> =&gt; <span class=hljs-built_in >Array</span>{<span class=hljs-built_in >Any</span>,<span class=hljs-number >1</span>}[[<span class=hljs-string >&quot;q&quot;</span>, <span class=hljs-number >0</span>], [<span class=hljs-string >&quot;q&quot;</span>, <span class=hljs-number >1</span>], [<span class=hljs-string >&quot;q&quot;</span>, <span class=hljs-number >2</span>]],<span class=hljs-string >&quot;memory_slots&quot;</span> =&gt; <span class=hljs-number >1</span>,<span class=hljs-string >&quot;n_qubits&quot;</span> =&gt; <span class=hljs-number >3</span>),<span class=hljs-string >&quot;config&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >Any</span>,<span class=hljs-built_in >Any</span>}())],<span class=hljs-string >&quot;header&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>(<span class=hljs-string >&quot;backend_name&quot;</span> =&gt; <span class=hljs-string >&quot;ibmq_santiago&quot;</span>,<span class=hljs-string >&quot;description&quot;</span> =&gt; <span class=hljs-string >&quot;Set of Experiments 1&quot;</span>),<span class=hljs-string >&quot;config&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Integer</span>}(<span class=hljs-string >&quot;memory_slots&quot;</span> =&gt; <span class=hljs-number >1</span>,<span class=hljs-string >&quot;shots&quot;</span> =&gt; <span class=hljs-number >1024</span>,<span class=hljs-string >&quot;init_qubits&quot;</span> =&gt; <span class=hljs-literal >true</span>),<span class=hljs-string >&quot;schema_version&quot;</span> =&gt; <span class=hljs-string >&quot;1.0.0&quot;</span>,<span class=hljs-string >&quot;type&quot;</span> =&gt; <span class=hljs-string >&quot;QASM&quot;</span>)), <span class=hljs-string >&quot;5f9b2b7a8110040012d4451b&quot;</span>)</code></pre> <p>There&#39;s a bunch of stuff that happens in here. Let&#39;s take a closer look. First the API fetches the link for the <code>ibmq_santiago</code> backend. The second step is the most important step in the entire package as it is something that has been revised over more than three times to accomodate all the edge cases and to make it a bit fast. </p> <p>Yao stores it&#39;s circuits in the form of an AST&#40;Abstract Syntax Tree&#41;, <br>viz. <code>Yao Quantum Block Intermediate Representation&#40;QBIR&#41;</code></p> <img src="https://docs.yaoquantum.org/dev/assets/images/YaoFramework.png"> <p>while the IBMQ hardware runs on <code>Open Quantum Assembly Language&#40;OpenQASM&#41;</code>. Also the IBMQ server accepts a special JSON object viz. the <code>QObj</code> to hold the circuit information in the JSON request. What we needed here was a conversion method from Yao QBIR to QObj, for which we implemented this <a href="https://arxiv.org/abs/1809.03452">paper</a>, that specifies the Oobj requirements. The process involved flattening the QBIR and porting the blocks to QASM type. </p> <ul> <li><p>Once the job is uploaded, the time take to run the circuit may depend on the complexity of the cirucit and the backend load. One can check it via the <code>status&#40;&#41;</code> method,</p> </ul> <code>stat &#61; status&#40;job::IBMQJob&#41;</code> <p>The possible return values are, <code>COMPLETED</code>, <code>VALIDATING</code>, <code>QUEUED</code>, <code>RUNNING</code>, <code>ERROR_VALIDATING_JOB</code>, <code>ERROR_RUNNING_JOB</code></p> <pre><code class="julia hljs">status(job)
<span class=hljs-string >&quot;VALIDATING&quot;</span>

status(job)
<span class=hljs-string >&quot;QUEUED&quot;</span>

status(job)
<span class=hljs-string >&quot;RUNNING&quot;</span>

status(job)
<span class=hljs-string >&quot;COMPLETED&quot;</span></code></pre> <ul> <li><p>Now that we know that the job status is <code>COMPLETED</code>, we can download the results.</p> </ul> <code>getresult&#40;job::IBMQJob&#41;</code> <p>One must have applied the <code>measure</code> block to get some concrete readings.</p> <pre><code class="julia hljs">res = getresult(job)
Connecting to ibmq_qasm_simulator...✔
Fetching result from ibmq_qasm_simulator...✔
<span class=hljs-number >1</span>-element <span class=hljs-built_in >Array</span>{<span class=hljs-built_in >Any</span>,<span class=hljs-number >1</span>}:
 <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;time_taken&quot;</span> =&gt; <span class=hljs-number >0.001423168</span>,<span class=hljs-string >&quot;header&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;clbit_labels&quot;</span> =&gt; <span class=hljs-built_in >Any</span>[<span class=hljs-built_in >Any</span>[<span class=hljs-string >&quot;c&quot;</span>, <span class=hljs-number >0</span>], <span class=hljs-built_in >Any</span>[<span class=hljs-string >&quot;c&quot;</span>, <span class=hljs-number >1</span>]],<span class=hljs-string >&quot;qubit_labels&quot;</span> =&gt; <span class=hljs-built_in >Any</span>[<span class=hljs-built_in >Any</span>[<span class=hljs-string >&quot;q&quot;</span>, <span class=hljs-number >0</span>]],<span class=hljs-string >&quot;memory_slots&quot;</span> =&gt; <span class=hljs-number >1</span>,<span class=hljs-string >&quot;n_qubits&quot;</span> =&gt; <span class=hljs-number >1</span>),<span class=hljs-string >&quot;status&quot;</span> =&gt; <span class=hljs-string >&quot;DONE&quot;</span>,<span class=hljs-string >&quot;success&quot;</span> =&gt; <span class=hljs-literal >true</span>,<span class=hljs-string >&quot;data&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;counts&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;0x0&quot;</span> =&gt; <span class=hljs-number >1024</span>)),<span class=hljs-string >&quot;metadata&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;fusion&quot;</span> =&gt; <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >String</span>,<span class=hljs-built_in >Any</span>}(<span class=hljs-string >&quot;enabled&quot;</span> =&gt; <span class=hljs-literal >false</span>),<span class=hljs-string >&quot;method&quot;</span> =&gt; <span class=hljs-string >&quot;stabilizer&quot;</span>,<span class=hljs-string >&quot;measure_sampling&quot;</span> =&gt; <span class=hljs-literal >true</span>,<span class=hljs-string >&quot;parallel_state_update&quot;</span> =&gt; <span class=hljs-number >16</span>,<span class=hljs-string >&quot;parallel_shots&quot;</span> =&gt; <span class=hljs-number >1</span>),<span class=hljs-string >&quot;shots&quot;</span> =&gt; <span class=hljs-number >1024</span>,<span class=hljs-string >&quot;seed_simulator&quot;</span> =&gt; <span class=hljs-number >301089120</span>)</code></pre> </div> </div> </div> <div class=page__footer > <footer> <div class=page__footer-copyright >&copy; Arsh Sharma. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://julialang.org" rel=nofollow >The Julia Language</a>.</div> </footer> </div> <script src="/libs/minimal-mistakes/main.min.js"></script> <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin=anonymous ></script>